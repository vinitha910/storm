##
## MIT License
##
## Copyright (c) 2020-2021 NVIDIA CORPORATION.
##
## Permission is hereby granted, free of charge, to any person obtaining a
## copy of this software and associated documentation files (the "Software"),
## to deal in the Software without restriction, including without limitation
## the rights to use, copy, modify, merge, publish, distribute, sublicense,
## and/or sell copies of the Software, and to permit persons to whom the
## Software is furnished to do so, subject to the following conditions:
##
## The above copyright notice and this permission notice shall be included in
## all copies or substantial portions of the Software.
##
## THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
## IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
## FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
## THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
## LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
## FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
use_cuda: True
cuda_device_num: 0

control_dt: 0.1
sim_env_config:
    headless: True
    cam_pos: [0.0, 0.5, 0.000001] #[2.5, 1.5, 4]
    cam_target: [0.0, 0.0, 0.0]
    asset_path: "/home/vinitha/workspaces/granular_media_rl/assets/"        
    urdf: "ball.urdf"  
    spacing: 0.5

    table_config:
        width: 0.4
        length: 0.4
        depth: 0.01

    particle_config:
        particle_size: 0.003
        particle_mass: 0.00003311965
        pile_width: 4
        pile_depth: 4
        pile_height: 4
        pile_start_height: 0.1

    tool_config:
        length: 0.05
        width: 0.005
        height: 0.05

    camera_config:
        cam_pos: [0.0, 0.211, 0.000001]
        cam_target: [0.0, 0.0, 0.0]
        width: 128
        height: 128

    physics_params:
        sliding_friction: 1.0
        rolling_friction: 1.0
        torsion_friction: 1.0
        restitution: 0.0

    pile_config:
        min_dx: -0.03
        max_dx: 0.03
        min_dy: -0.03
        max_dy: 0.03     

model:
  dt: 30
  max_action: 1 #10.0
  max_speed: 0.05 #m/s
  max_ang_vel: 0.7853981633974483
  batch_size: 16
  sampling_threshold: 5.
  # model_dir: "/home/vinitha/workspaces/mppi_particles/particle_dynamics_network/checkpoints/grta_5_2/"
  # model_name: 'model-step=1756599-running_loss=0.55.ckpt' #"seq_7_layers" #"model_t5_b4_s1_l7_10_seq"
  model_dir: "/home/vinitha/workspaces/mppi_particles/mppi/models/"
  model_name: 'visual_foresight.ckpt'

mppi:
  horizon           : 10 # 100
  init_cov          : 0.5 #.5
  gamma             : 0.98 #
  n_iters           : 1
  step_size_mean    : 0.8
  step_size_cov     : 0.8
  beta              : 3
  alpha             : 1
  num_particles     : 16 #10000
  update_cov        : True
  cov_type          : 'diag_AxA' # 
  kappa             : 0.0001
  null_act_frac     : 0.05
  sample_mode       : 'mean'
  base_action       : 'repeat'
  squash_fn         : 'clamp' # [clamp,]
  hotstart          : True
  visual_traj       : 'state_seq'
  sample_params:
    type: 'multiple'
    fixed_samples: True
    sample_ratio: {'halton':0.0, 'halton-knot':1.0, 'random':0.0, 'random-knot':0.0}
    seed: 0
    filter_coeffs: None #[0.5, 0.3, 0.2]
    knot_scale: 3
    #filter_coeffs: [1.0, 0.0, 0.0]
